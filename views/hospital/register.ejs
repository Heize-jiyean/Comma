<!-- Modal -->
<div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="reviewModalLabel">리뷰 등록</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="hospitalForm" action="/hospital/register" method="POST">
            <div class="mb-3">
              <label for="name" class="form-label">병원 이름</label>
              <input type="text" class="form-control" id="name" name="name" value="<%= typeof hospitalName !== 'undefined' ? hospitalName : '' %>" required readonly>
            </div>
            <div class="mb-3">
              <label for="description" class="form-label">리뷰 내용</label>
              <textarea class="form-control" id="description" name="description" rows="5" required></textarea>
            </div>
            <input type="hidden" id="latitude" name="latitude">
            <input type="hidden" id="longitude" name="longitude">
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
          <button type="button" class="btn btn-primary" onclick="submitReview()">리뷰 등록</button>
        </div>
      </div>
    </div>
  </div>
  
  <script>
  function submitReview() {
    const form = document.getElementById('hospitalForm');
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }
    
    form.submit();
  }
  
  // 모달이 열릴 때 병원 이름을 설정
  document.getElementById('reviewModal').addEventListener('show.bs.modal', function (event) {
    const button = event.relatedTarget;
    const hospitalName = button.getAttribute('data-hospital-name');
    document.getElementById('name').value = hospitalName;
  });
  </script>